<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        Document
    </title>
    <link rel='stylesheet' href=../../../css/index.css />
    <link rel='stylesheet' href=../../../css/c.css /><link rel='stylesheet' href=../../../css/css.css /><link rel='stylesheet' href=../../../css/json.css /><link rel='stylesheet' href=../../../css/python.css /><link rel='stylesheet' href=../../../css/shell.css /><link rel='stylesheet' href=../../../css/txt.css /><link rel='stylesheet' href=../../../css/yaml.css />
    <link rel="icon" href="https://raw.githubusercontent.com/learner-lu/picbed/master/logo.png">
</head>

<body class="light">
    <a href="https://github.com/luzhixing12345/luzhixing12345.github.io" target="_blank" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <div class="header-navigator"><ul><li><a href="#h2-0">WSL</a><ul><li><a href="#h3-1">安装 WSL</a></li></ul><ul><li><a href="#h3-2">WSL 中使用gdb调试</a></li></ul><ul><li><a href="#h3-3">WSL 与 Windows文件互传</a></li></ul><ul><li><a href="#h3-4">安装一个更加美观的 Terminal 终端</a></li></ul></li></ul><ul><li><a href="#h2-5">WSL2代理配置</a></li></ul><ul><li><a href="#h2-6">修改V2ray默认选项</a><ul><li><a href="#h3-7">查看代理端口</a></li></ul><ul><li><a href="#h3-8">修改.bashrc文件</a></li></ul><ul><li><a href="#h3-9">测试</a></li></ul><ul><li><a href="#h3-10">直连域名配置</a></li></ul></li></ul><ul><li><a href="#h2-11">SSH 失败</a></li></ul><ul><li><a href="#h2-12">NPM 失败</a></li></ul><ul><li><a href="#h2-13">GUI 界面</a></li></ul><ul><li><a href="#h2-14">修改默认登录用户</a></li></ul><ul><li><a href="#h2-15">WSL2 切换根目录位置</a></li></ul><ul><li><a href="#h2-16">参考</a></li></ul></div><div class='markdown-body'><hr><p>title: WSL2配置 date: 2022-10-06 17:35:04 tags: 环境配置</p><hr><h2 id="h2-0">WSL</h2><blockquote><p><a href="https://learn.microsoft.com/zh-cn/windows/wsl/install" target="_blank">官方文档</a></p></blockquote><h3 id="h3-1">安装 WSL</h3><p>Windows可以使用WSL(<b>W</b>indows <b>S</b>ubsystem for <b>L</b>inux)来使用Linux环境</p><ol start="1"><li>打开控制面板-&gt;程序<p><a data-lightbox="example-1" href="https://raw.githubusercontent.com/learner-lu/picbed/master/20220924231310.png"><img src="https://raw.githubusercontent.com/learner-lu/picbed/master/20220924231310.png" alt="20220924231310"></a></p></li></ol><ol start="2"><li>启动或关闭 Windows 功能<p><a data-lightbox="example-1" href="https://raw.githubusercontent.com/learner-lu/picbed/master/20220924233547.png"><img src="https://raw.githubusercontent.com/learner-lu/picbed/master/20220924233547.png" alt="20220924233547"></a></p></li></ol><ol start="3"><li>开启 &quot;适用于 Linux 的 Windows 子系统&quot; 和 &quot;虚拟机平台&quot; 选项<p><a data-lightbox="example-1" href="https://raw.githubusercontent.com/learner-lu/picbed/master/20220924233650.png"><img src="https://raw.githubusercontent.com/learner-lu/picbed/master/20220924233650.png" alt="20220924233650"></a></p><p>启用服务,重启电脑</p></li></ol><ol start="4"><li>键盘按下 <kbd>Win</kbd> + <kbd>r</kbd> 输入 cmd 后回车<pre class="language-shell"><code><span class="Token Program ID">wsl</span><span class="Token SPACE"> </span><span class="Token OPTION">--install</span><span class="Token SPACE"> </span><span class="Token OPTION">-d</span><span class="Token SPACE"> </span><span class="Token ID">Ubuntu</span></code></pre><p>当然我们也可以选择其他操作系统,可以通过如下命令查看可用发行版列表</p><pre class="language-shell"><code><span class="Token Program ID">wsl</span><span class="Token SPACE"> </span><span class="Token OPTION">--list</span><span class="Token SPACE"> </span><span class="Token OPTION">--online</span></code></pre><p><a data-lightbox="example-1" href="https://raw.githubusercontent.com/learner-lu/picbed/master/20221020002852.png"><img src="https://raw.githubusercontent.com/learner-lu/picbed/master/20221020002852.png" alt="20221020002852"></a></p></li></ol><ol start="5"><li>等待安装完毕之后,输入用户名 密码就可以进入Linux系统了,这个操作系统的名字是 Ubuntu<p>如果<b>关闭窗口后再想重新进入这个系统</b>,只需要在命令行中输入 wsl 或者这个操作系统的名字就可以直接进入</p><p>当然也支持<a href="https://learn.microsoft.com/zh-cn/windows/wsl/install#ways-to-run-multiple-linux-distributions-with-wsl" target="_blank">安装运行多个操作系统</a>,不过暂时没有这个必要</p></li></ol><h3 id="h3-2">WSL 中使用gdb调试</h3><ol start="1"><li>检查系统中是否已经安装了gdb<pre class="language-shell"><code><span class="Token Program ID">gdb</span><span class="Token SPACE"> </span><span class="Token OPTION">-v</span></code></pre></li></ol><ol start="2"><li>如果没有安装,则使用命令行安装<pre class="language-shell"><code><span class="Token Program ID">sudo</span><span class="Token SPACE"> </span><span class="Token ID">apt-get</span><span class="Token SPACE"> </span><span class="Token ID">update</span><span class="Token LF">
</span><span class="Token Program ID">sudo</span><span class="Token SPACE"> </span><span class="Token ID">apt-get</span><span class="Token SPACE"> </span><span class="Token ID">install</span><span class="Token SPACE"> </span><span class="Token ID">build-essential</span><span class="Token SPACE"> </span><span class="Token ID">gdb</span></code></pre><p>&lt;details&gt;&lt;summary&gt;如果下载太慢了&lt;/summary&gt;</p><p>考虑切换一个下载的源</p><pre class="language-shell"><code><span class="Token Program ID">vim</span><span class="Token SPACE"> </span><span class="Token PATH">/etc/apt/sources.list</span></code></pre><p>在文件最前面加入 / 删除整个文件重新创建一个新的文件并写入</p><pre class="language-txt"><code><span class="Token ID">deb</span><span class="Token SPACE"> </span><span class="Token ID">http</span><span class="Token COLON">:</span><span class="Token DIV">/</span><span class="Token DIV">/</span><span class="Token ID">mirrors</span><span class="Token DOT">.</span><span class="Token ID">aliyun</span><span class="Token DOT">.</span><span class="Token ID">com</span><span class="Token DIV">/</span><span class="Token ID">ubuntu</span><span class="Token DIV">/</span><span class="Token SPACE"> </span><span class="Token ID">jammy</span><span class="Token SPACE"> </span><span class="Token ID">main</span><span class="Token SPACE"> </span><span class="Token ID">restricted</span><span class="Token SPACE"> </span><span class="Token ID">universe</span><span class="Token SPACE"> </span><span class="Token ID">multiverse</span><span class="Token LF">
</span><span class="Token ID">deb</span><span class="Token MINUS">-</span><span class="Token ID">src</span><span class="Token SPACE"> </span><span class="Token ID">http</span><span class="Token COLON">:</span><span class="Token DIV">/</span><span class="Token DIV">/</span><span class="Token ID">mirrors</span><span class="Token DOT">.</span><span class="Token ID">aliyun</span><span class="Token DOT">.</span><span class="Token ID">com</span><span class="Token DIV">/</span><span class="Token ID">ubuntu</span><span class="Token DIV">/</span><span class="Token SPACE"> </span><span class="Token ID">jammy</span><span class="Token SPACE"> </span><span class="Token ID">main</span><span class="Token SPACE"> </span><span class="Token ID">restricted</span><span class="Token SPACE"> </span><span class="Token ID">universe</span><span class="Token SPACE"> </span><span class="Token ID">multiverse</span><span class="Token LF">
</span><span class="Token ID">deb</span><span class="Token SPACE"> </span><span class="Token ID">http</span><span class="Token COLON">:</span><span class="Token DIV">/</span><span class="Token DIV">/</span><span class="Token ID">mirrors</span><span class="Token DOT">.</span><span class="Token ID">aliyun</span><span class="Token DOT">.</span><span class="Token ID">com</span><span class="Token DIV">/</span><span class="Token ID">ubuntu</span><span class="Token DIV">/</span><span class="Token SPACE"> </span><span class="Token ID">jammy</span><span class="Token MINUS">-</span><span class="Token ID">security</span><span class="Token SPACE"> </span><span class="Token ID">main</span><span class="Token SPACE"> </span><span class="Token ID">restricted</span><span class="Token SPACE"> </span><span class="Token ID">universe</span><span class="Token SPACE"> </span><span class="Token ID">multiverse</span><span class="Token LF">
</span><span class="Token ID">deb</span><span class="Token MINUS">-</span><span class="Token ID">src</span><span class="Token SPACE"> </span><span class="Token ID">http</span><span class="Token COLON">:</span><span class="Token DIV">/</span><span class="Token DIV">/</span><span class="Token ID">mirrors</span><span class="Token DOT">.</span><span class="Token ID">aliyun</span><span class="Token DOT">.</span><span class="Token ID">com</span><span class="Token DIV">/</span><span class="Token ID">ubuntu</span><span class="Token DIV">/</span><span class="Token SPACE"> </span><span class="Token ID">jammy</span><span class="Token MINUS">-</span><span class="Token ID">security</span><span class="Token SPACE"> </span><span class="Token ID">main</span><span class="Token SPACE"> </span><span class="Token ID">restricted</span><span class="Token SPACE"> </span><span class="Token ID">universe</span><span class="Token SPACE"> </span><span class="Token ID">multiverse</span><span class="Token LF">
</span><span class="Token ID">deb</span><span class="Token SPACE"> </span><span class="Token ID">http</span><span class="Token COLON">:</span><span class="Token DIV">/</span><span class="Token DIV">/</span><span class="Token ID">mirrors</span><span class="Token DOT">.</span><span class="Token ID">aliyun</span><span class="Token DOT">.</span><span class="Token ID">com</span><span class="Token DIV">/</span><span class="Token ID">ubuntu</span><span class="Token DIV">/</span><span class="Token SPACE"> </span><span class="Token ID">jammy</span><span class="Token MINUS">-</span><span class="Token ID">updates</span><span class="Token SPACE"> </span><span class="Token ID">main</span><span class="Token SPACE"> </span><span class="Token ID">restricted</span><span class="Token SPACE"> </span><span class="Token ID">universe</span><span class="Token SPACE"> </span><span class="Token ID">multiverse</span><span class="Token LF">
</span><span class="Token ID">deb</span><span class="Token MINUS">-</span><span class="Token ID">src</span><span class="Token SPACE"> </span><span class="Token ID">http</span><span class="Token COLON">:</span><span class="Token DIV">/</span><span class="Token DIV">/</span><span class="Token ID">mirrors</span><span class="Token DOT">.</span><span class="Token ID">aliyun</span><span class="Token DOT">.</span><span class="Token ID">com</span><span class="Token DIV">/</span><span class="Token ID">ubuntu</span><span class="Token DIV">/</span><span class="Token SPACE"> </span><span class="Token ID">jammy</span><span class="Token MINUS">-</span><span class="Token ID">updates</span><span class="Token SPACE"> </span><span class="Token ID">main</span><span class="Token SPACE"> </span><span class="Token ID">restricted</span><span class="Token SPACE"> </span><span class="Token ID">universe</span><span class="Token SPACE"> </span><span class="Token ID">multiverse</span><span class="Token LF">
</span><span class="Token ID">deb</span><span class="Token SPACE"> </span><span class="Token ID">http</span><span class="Token COLON">:</span><span class="Token DIV">/</span><span class="Token DIV">/</span><span class="Token ID">mirrors</span><span class="Token DOT">.</span><span class="Token ID">aliyun</span><span class="Token DOT">.</span><span class="Token ID">com</span><span class="Token DIV">/</span><span class="Token ID">ubuntu</span><span class="Token DIV">/</span><span class="Token SPACE"> </span><span class="Token ID">jammy</span><span class="Token MINUS">-</span><span class="Token ID">proposed</span><span class="Token SPACE"> </span><span class="Token ID">main</span><span class="Token SPACE"> </span><span class="Token ID">restricted</span><span class="Token SPACE"> </span><span class="Token ID">universe</span><span class="Token SPACE"> </span><span class="Token ID">multiverse</span><span class="Token LF">
</span><span class="Token ID">deb</span><span class="Token MINUS">-</span><span class="Token ID">src</span><span class="Token SPACE"> </span><span class="Token ID">http</span><span class="Token COLON">:</span><span class="Token DIV">/</span><span class="Token DIV">/</span><span class="Token ID">mirrors</span><span class="Token DOT">.</span><span class="Token ID">aliyun</span><span class="Token DOT">.</span><span class="Token ID">com</span><span class="Token DIV">/</span><span class="Token ID">ubuntu</span><span class="Token DIV">/</span><span class="Token SPACE"> </span><span class="Token ID">jammy</span><span class="Token MINUS">-</span><span class="Token ID">proposed</span><span class="Token SPACE"> </span><span class="Token ID">main</span><span class="Token SPACE"> </span><span class="Token ID">restricted</span><span class="Token SPACE"> </span><span class="Token ID">universe</span><span class="Token SPACE"> </span><span class="Token ID">multiverse</span><span class="Token LF">
</span><span class="Token ID">deb</span><span class="Token SPACE"> </span><span class="Token ID">http</span><span class="Token COLON">:</span><span class="Token DIV">/</span><span class="Token DIV">/</span><span class="Token ID">mirrors</span><span class="Token DOT">.</span><span class="Token ID">aliyun</span><span class="Token DOT">.</span><span class="Token ID">com</span><span class="Token DIV">/</span><span class="Token ID">ubuntu</span><span class="Token DIV">/</span><span class="Token SPACE"> </span><span class="Token ID">jammy</span><span class="Token MINUS">-</span><span class="Token ID">backports</span><span class="Token SPACE"> </span><span class="Token ID">main</span><span class="Token SPACE"> </span><span class="Token ID">restricted</span><span class="Token SPACE"> </span><span class="Token ID">universe</span><span class="Token SPACE"> </span><span class="Token ID">multiverse</span><span class="Token LF">
</span><span class="Token ID">deb</span><span class="Token MINUS">-</span><span class="Token ID">src</span><span class="Token SPACE"> </span><span class="Token ID">http</span><span class="Token COLON">:</span><span class="Token DIV">/</span><span class="Token DIV">/</span><span class="Token ID">mirrors</span><span class="Token DOT">.</span><span class="Token ID">aliyun</span><span class="Token DOT">.</span><span class="Token ID">com</span><span class="Token DIV">/</span><span class="Token ID">ubuntu</span><span class="Token DIV">/</span><span class="Token SPACE"> </span><span class="Token ID">jammy</span><span class="Token MINUS">-</span><span class="Token ID">backports</span><span class="Token SPACE"> </span><span class="Token ID">main</span><span class="Token SPACE"> </span><span class="Token ID">restricted</span><span class="Token SPACE"> </span><span class="Token ID">universe</span><span class="Token SPACE"> </span><span class="Token ID">multiverse</span></code></pre><p>保存退出,重新执行</p><blockquote><p><a href="https://blog.csdn.net/xiangxianghehe/article/details/122856771" target="_blank">其他源</a></p></blockquote><p>&lt;/details&gt;</p></li></ol><ol start="3"><li>查看WSL版本<pre class="language-shell"><code><span class="Token Program ID">wsl</span><span class="Token SPACE"> </span><span class="Token OPTION">--list</span><span class="Token SPACE"> </span><span class="Token OPTION">--verbose</span></code></pre><p>如果是WSL1的运行gdb会出现问题,升级到WSL2</p><blockquote><p><a href="https://github.com/microsoft/WSL/issues/8356" target="_blank">Github Issue1</a></p><p><a href="https://github.com/microsoft/WSL/issues/8516" target="_blank">Github Issue2</a></p></blockquote><p><b>回到Windows系统的命令行</b>, 升级WSL系统</p><pre class="language-shell"><code><span class="Token Program ID">wsl</span><span class="Token SPACE"> </span><span class="Token OPTION">--set-version</span><span class="Token SPACE"> </span><span class="Token ID">Ubuntu</span><span class="Token SPACE"> </span><span class="Token NUMBER">2</span></code></pre></li></ol><h3 id="h3-3">WSL 与 Windows文件互传</h3><p>WSL正常情况下会出现在文件资源管理器,可以直接在 home 目录下找到当前安装的操作系统</p><p><a data-lightbox="example-1" href="https://raw.githubusercontent.com/learner-lu/picbed/master/20221020002321.png"><img src="https://raw.githubusercontent.com/learner-lu/picbed/master/20221020002321.png" alt="20221020002321"></a></p><p>如果安装之后没有找到, 可以通过其他方式</p><ul><li><kbd>win</kbd> + <kbd>r</kbd> 输入 <code>\wsl$</code></li></ul><ul><li>进入wsl的操作系统中,在终端中输入 <code>explorer.exe .</code></li></ul><p>我们可以直接打开两个文件夹,直接通过复制粘贴实现文件传输</p><p>除此之蛙wsl将windows中的文件挂载到 /mnt 虚拟磁盘下,默认的登录路径也是这里,我们可以直接通过mnt切换盘符及路径,比如:</p><pre class="language-shell"><code><span class="Token HOST_NAME">kamilu@LZX</span><span class="Token COLON">:</span><span class="Token DIR_PATH">/mnt/c/Users/luzhi</span><span class="Token TAG">$</span><span class="Token SPACE"> </span><span class="Token Keyword CD">cd</span><span class="Token SPACE"> </span><span class="Token PATH">/mnt/d</span><span class="Token LF">
</span><span class="Token HOST_NAME">kamilu@LZX</span><span class="Token COLON">:</span><span class="Token DIR_PATH">/mnt/d</span><span class="Token TAG">$</span></code></pre><p>再利用 cp 或者 mv 命令就可以实现文件的传输了,笔者这里还是推荐第一种,比较直接</p><h3 id="h3-4">安装一个更加美观的 Terminal 终端</h3><p>原生的命令行窗口并不好看,由于本实验可能需要大部分时间面对一个终端的显示,我们考虑选择使用一个更加美观漂亮的终端</p><p>在 <a href="https://github.com/microsoft/terminal/releases" target="_blank">terminal release</a> 中下载最新版的安装包</p><p>注意区分 Win10/11版本,不要下错了</p><blockquote><p>如果不清楚windows版本可以按下<kbd>Win</kbd> + <kbd>r</kbd> 输入 winver查看</p></blockquote><p><a data-lightbox="example-1" href="https://raw.githubusercontent.com/learner-lu/picbed/master/20220925010349.png"><img src="https://raw.githubusercontent.com/learner-lu/picbed/master/20220925010349.png" alt="20220925010349"></a></p><p>下载后点击对应版本安装即可,接下来尝试再来按下 <kbd>Win</kbd> + <kbd>r</kbd> 输入cmd进入控制台吧,是不是好看多了?</p><h2 id="h2-5">WSL2代理配置</h2><p>WSL2由于直接使用局域网与本机通信,可以直接使用Windows上的代理端口,这里假定读者已安装过 Windows 下的 <a href="https://me.tofly.cyou/" target="_blank">V2ray</a></p><hr><h2 id="h2-6">修改V2ray默认选项</h2><p>设置-&gt;参数设置-&gt;允许来自局域网的连接</p><p><a data-lightbox="example-1" href="https://raw.githubusercontent.com/learner-lu/picbed/master/20221023180045.png"><img src="https://raw.githubusercontent.com/learner-lu/picbed/master/20221023180045.png" alt="20221023180045"></a></p><h3 id="h3-7">查看代理端口</h3><p><a data-lightbox="example-1" href="https://raw.githubusercontent.com/learner-lu/picbed/master/20221023180208.png"><img src="https://raw.githubusercontent.com/learner-lu/picbed/master/20221023180208.png" alt="20221023180208"></a></p><p>http的系统代理走局域网的10811端口</p><h3 id="h3-8">修改.bashrc文件</h3><p>打开.bashrc</p><pre class="language-shell"><code><span class="Token Program ID">vim</span><span class="Token SPACE"> </span><span class="Token TILDE">~</span><span class="Token PATH">/.bashrc</span></code></pre><p>在文件结尾加入</p><pre class="language-shell"><code><span class="Token Keyword EXPORT">export</span><span class="Token SPACE"> </span><span class="Token Variant ID">host_ip</span><span class="Token ASSIGN">=</span><span class="Token DOLLAR">$</span><span class="Token BraceDepth-0 LPAREN">(</span><span class="Token Program ID">cat</span><span class="Token SPACE"> </span><span class="Token PATH">/etc/resolv.conf</span><span class="Token SPACE"> </span><span class="Token PIPE">|</span><span class="Token Program ID">grep</span><span class="Token SPACE"> </span><span class="Token String STRING">&quot;nameserver&quot;</span><span class="Token SPACE"> </span><span class="Token PIPE">|</span><span class="Token Program ID">cut</span><span class="Token SPACE"> </span><span class="Token OPTION">-f</span><span class="Token SPACE"> </span><span class="Token NUMBER">2</span><span class="Token SPACE"> </span><span class="Token OPTION">-d</span><span class="Token SPACE"> </span><span class="Token String STRING">&quot; &quot;</span><span class="Token BraceDepth-0 RPAREN">)</span><span class="Token LF">
</span><span class="Token Keyword EXPORT">export</span><span class="Token SPACE"> </span><span class="Token Variant ID">http_proxy</span><span class="Token ASSIGN">=</span><span class="Token String STRING">&quot;http://$host_ip:10811&quot;</span><span class="Token LF">
</span><span class="Token Keyword EXPORT">export</span><span class="Token SPACE"> </span><span class="Token Variant ID">https_proxy</span><span class="Token ASSIGN">=</span><span class="Token String STRING">&quot;http://$host_ip:10811&quot;</span></code></pre><p>:wq保存退出,激活环境</p><pre class="language-shell"><code><span class="Token Program ID">source</span><span class="Token SPACE"> </span><span class="Token TILDE">~</span><span class="Token PATH">/.bashrc</span></code></pre><h3 id="h3-9">测试</h3><pre class="language-shell"><code><span class="Token Program ID">wget</span><span class="Token SPACE"> </span><span class="Token ID">www.google.com</span><span class="Token LF">
</span><span class="Token Program ID">wget</span><span class="Token SPACE"> </span><span class="Token Url ID">https://raw.githubusercontent.com/luzhixing12345/MyScripts/main/main.py</span></code></pre><p>得到两个文件即为成功</p><h3 id="h3-10">直连域名配置</h3><p>正常使用v2ray会出现访问一些服务器的域名无法访问,但是直连可以访问.这时候需要 设置-路由设置-直连的Domain/IP</p><h2 id="h2-11">SSH 失败</h2><p>之前有一段时间突然发现 git 一直push不上去, 也pull不下来</p><p>然后使用 <code>ssh -vT git@github.com</code> 查看发现原来是 SSH 的问题, 一直卡在下面的这个地方</p><pre class="language-shell"><code><span class="Token Program ID">debug1:</span><span class="Token SPACE"> </span><span class="Token ID">expecting</span><span class="Token SPACE"> </span><span class="Token ID">SSH2_MSG_KEX_ECDH_REPLY</span></code></pre><p>后来查阅了一些资料, 在 <a href="https://github.com/microsoft/WSL/issues/4253" target="_blank">Github cloning error in wsl2 (driver MTU)</a> 得到了解决</p><p>总结一下就是先<a href="https://www.intel.com/content/www/us/en/download/19351/windows-10-and-windows-11-wi-fi-drivers-for-intel-wireless-adapters.html?product=99446" target="_blank">下载网卡驱动</a></p><p>正常来说你安装完网卡驱动应该就可以解决了, 重启一下, 要不就等一下</p><p>如果仍然有问题: 用 <code>ip addr | grep mtu</code> 看下 eth0 的 mtu</p><pre class="language-shell"><code><span class="Token BraceDepth-0 LPAREN">(</span><span class="Token Program ID">base</span><span class="Token BraceDepth-0 RPAREN">)</span><span class="Token SPACE"> </span><span class="Token HOST_NAME">kamilu@LZX</span><span class="Token COLON">:</span><span class="Token DIR_PATH">~</span><span class="Token TAG">$</span><span class="Token SPACE"> </span><span class="Token Program ID">ip</span><span class="Token SPACE"> </span><span class="Token ID">addr</span><span class="Token SPACE"> </span><span class="Token PIPE">|</span><span class="Token SPACE"> </span><span class="Token Program ID">grep</span><span class="Token SPACE"> </span><span class="Token ID">mtu</span><span class="Token LF">
</span><span class="Token NUMBER">1</span><span class="Token COLON">:</span><span class="Token SPACE"> </span><span class="Token Program ID">lo:</span><span class="Token SPACE"> </span><span class="Token REDIRECT_FROM">&lt;</span><span class="Token ID">LOOPBACK</span><span class="Token COMMA">,</span><span class="Token ID">UP</span><span class="Token COMMA">,</span><span class="Token ID">LOWER_UP</span><span class="Token REDIRECT_TO">&gt;</span><span class="Token SPACE"> </span><span class="Token ID">mtu</span><span class="Token SPACE"> </span><span class="Token NUMBER">65536</span><span class="Token SPACE"> </span><span class="Token ID">qdisc</span><span class="Token SPACE"> </span><span class="Token ID">noqueue</span><span class="Token SPACE"> </span><span class="Token ID">state</span><span class="Token SPACE"> </span><span class="Token ID">UNKNOWN</span><span class="Token SPACE"> </span><span class="Token ID">group</span><span class="Token SPACE"> </span><span class="Token ID">default</span><span class="Token SPACE"> </span><span class="Token ID">qlen</span><span class="Token SPACE"> </span><span class="Token NUMBER">1000</span><span class="Token LF">
</span><span class="Token NUMBER">2</span><span class="Token COLON">:</span><span class="Token SPACE"> </span><span class="Token Program ID">bond0:</span><span class="Token SPACE"> </span><span class="Token REDIRECT_FROM">&lt;</span><span class="Token ID">BROADCAST</span><span class="Token COMMA">,</span><span class="Token ID">MULTICAST</span><span class="Token COMMA">,</span><span class="Token ID">MASTER</span><span class="Token REDIRECT_TO">&gt;</span><span class="Token SPACE"> </span><span class="Token ID">mtu</span><span class="Token SPACE"> </span><span class="Token NUMBER">1500</span><span class="Token SPACE"> </span><span class="Token ID">qdisc</span><span class="Token SPACE"> </span><span class="Token ID">noop</span><span class="Token SPACE"> </span><span class="Token ID">state</span><span class="Token SPACE"> </span><span class="Token ID">DOWN</span><span class="Token SPACE"> </span><span class="Token ID">group</span><span class="Token SPACE"> </span><span class="Token ID">default</span><span class="Token SPACE"> </span><span class="Token ID">qlen</span><span class="Token SPACE"> </span><span class="Token NUMBER">1000</span><span class="Token LF">
</span><span class="Token NUMBER">3</span><span class="Token COLON">:</span><span class="Token SPACE"> </span><span class="Token Program ID">dummy0:</span><span class="Token SPACE"> </span><span class="Token REDIRECT_FROM">&lt;</span><span class="Token ID">BROADCAST</span><span class="Token COMMA">,</span><span class="Token ID">NOARP</span><span class="Token REDIRECT_TO">&gt;</span><span class="Token SPACE"> </span><span class="Token ID">mtu</span><span class="Token SPACE"> </span><span class="Token NUMBER">1500</span><span class="Token SPACE"> </span><span class="Token ID">qdisc</span><span class="Token SPACE"> </span><span class="Token ID">noop</span><span class="Token SPACE"> </span><span class="Token ID">state</span><span class="Token SPACE"> </span><span class="Token ID">DOWN</span><span class="Token SPACE"> </span><span class="Token ID">group</span><span class="Token SPACE"> </span><span class="Token ID">default</span><span class="Token SPACE"> </span><span class="Token ID">qlen</span><span class="Token SPACE"> </span><span class="Token NUMBER">1000</span><span class="Token LF">
</span><span class="Token NUMBER">4</span><span class="Token COLON">:</span><span class="Token SPACE"> </span><span class="Token Program ID">tunl0@NONE:</span><span class="Token SPACE"> </span><span class="Token REDIRECT_FROM">&lt;</span><span class="Token ID">NOARP</span><span class="Token REDIRECT_TO">&gt;</span><span class="Token SPACE"> </span><span class="Token ID">mtu</span><span class="Token SPACE"> </span><span class="Token NUMBER">1480</span><span class="Token SPACE"> </span><span class="Token ID">qdisc</span><span class="Token SPACE"> </span><span class="Token ID">noop</span><span class="Token SPACE"> </span><span class="Token ID">state</span><span class="Token SPACE"> </span><span class="Token ID">DOWN</span><span class="Token SPACE"> </span><span class="Token ID">group</span><span class="Token SPACE"> </span><span class="Token ID">default</span><span class="Token SPACE"> </span><span class="Token ID">qlen</span><span class="Token SPACE"> </span><span class="Token NUMBER">1000</span><span class="Token LF">
</span><span class="Token NUMBER">5</span><span class="Token COLON">:</span><span class="Token SPACE"> </span><span class="Token Program ID">sit0@NONE:</span><span class="Token SPACE"> </span><span class="Token REDIRECT_FROM">&lt;</span><span class="Token ID">NOARP</span><span class="Token REDIRECT_TO">&gt;</span><span class="Token SPACE"> </span><span class="Token ID">mtu</span><span class="Token SPACE"> </span><span class="Token NUMBER">1480</span><span class="Token SPACE"> </span><span class="Token ID">qdisc</span><span class="Token SPACE"> </span><span class="Token ID">noop</span><span class="Token SPACE"> </span><span class="Token ID">state</span><span class="Token SPACE"> </span><span class="Token ID">DOWN</span><span class="Token SPACE"> </span><span class="Token ID">group</span><span class="Token SPACE"> </span><span class="Token ID">default</span><span class="Token SPACE"> </span><span class="Token ID">qlen</span><span class="Token SPACE"> </span><span class="Token NUMBER">1000</span><span class="Token LF">
</span><span class="Token NUMBER">6</span><span class="Token COLON">:</span><span class="Token SPACE"> </span><span class="Token Program ID">eth0:</span><span class="Token SPACE"> </span><span class="Token REDIRECT_FROM">&lt;</span><span class="Token ID">BROADCAST</span><span class="Token COMMA">,</span><span class="Token ID">MULTICAST</span><span class="Token COMMA">,</span><span class="Token ID">UP</span><span class="Token COMMA">,</span><span class="Token ID">LOWER_UP</span><span class="Token REDIRECT_TO">&gt;</span><span class="Token SPACE"> </span><span class="Token ID">mtu</span><span class="Token SPACE"> </span><span class="Token NUMBER">1500</span><span class="Token SPACE"> </span><span class="Token ID">qdisc</span><span class="Token SPACE"> </span><span class="Token ID">mq</span><span class="Token SPACE"> </span><span class="Token ID">state</span><span class="Token SPACE"> </span><span class="Token ID">UP</span><span class="Token SPACE"> </span><span class="Token ID">group</span><span class="Token SPACE"> </span><span class="Token ID">default</span><span class="Token SPACE"> </span><span class="Token ID">qlen</span><span class="Token SPACE"> </span><span class="Token NUMBER">1000</span></code></pre><p>改成</p><pre class="language-shell"><code><span class="Token Program ID">sudo</span><span class="Token SPACE"> </span><span class="Token ID">ifconfig</span><span class="Token SPACE"> </span><span class="Token ID">eth0</span><span class="Token SPACE"> </span><span class="Token ID">mtu</span><span class="Token SPACE"> </span><span class="Token NUMBER">1350</span></code></pre><p>或者</p><pre class="language-shell"><code><span class="Token Program ID">sudo</span><span class="Token SPACE"> </span><span class="Token ID">ip</span><span class="Token SPACE"> </span><span class="Token ID">link</span><span class="Token SPACE"> </span><span class="Token ID">set</span><span class="Token SPACE"> </span><span class="Token ID">eth0</span><span class="Token SPACE"> </span><span class="Token ID">mtu</span><span class="Token SPACE"> </span><span class="Token NUMBER">1400</span></code></pre><h2 id="h2-12">NPM 失败</h2><p>安装 npm 后使用提示: /usr/bin/env: &#x27;bash\r&#x27;: No such file or directory</p><p>相关问题及解决办法见: <a href="https://stackoverflow.com/questions/67938486/after-installing-npm-on-wsl-ubuntu-20-04-i-get-the-message-usr-bin-env-bash" target="_blank">After installing npm on WSL</a></p><pre class="language-shell"><code><span class="Token Program ID">sudo</span><span class="Token SPACE"> </span><span class="Token ID">apt</span><span class="Token SPACE"> </span><span class="Token ID">install</span><span class="Token SPACE"> </span><span class="Token ID">nodejs</span><span class="Token SPACE"> </span><span class="Token ID">npm</span></code></pre><p>修改 /etc/wsl.conf</p><pre class="language-shell"><code><span class="Token Program ID">sudo</span><span class="Token SPACE"> </span><span class="Token ID">vim</span><span class="Token SPACE"> </span><span class="Token PATH">/etc/wsl.conf</span></code></pre><p>复制下面的内容</p><pre class="language-txt"><code><span class="Token BraceDepth-0 LSQUAR_PAREN">[</span><span class="Token ID">interop</span><span class="Token BraceDepth-0 RSQUAR_PAREN">]</span><span class="Token LF">
</span><span class="Token ID">appendWindowsPath</span><span class="Token SPACE"> </span><span class="Token ASSIGN">=</span><span class="Token SPACE"> </span><span class="Token ID">false</span></code></pre><p>重启</p><pre class="language-shell"><code><span class="Token Program ID">wsl</span><span class="Token SPACE"> </span><span class="Token OPTION">--shutdown</span><span class="Token LF">
</span><span class="Token Program ID">wsl</span></code></pre><h2 id="h2-13">GUI 界面</h2><p>WSL2 中执行</p><pre class="language-shell"><code><span class="Token Program ID">sudo</span><span class="Token SPACE"> </span><span class="Token ID">apt</span><span class="Token SPACE"> </span><span class="Token ID">install</span><span class="Token SPACE"> </span><span class="Token ID">xfce4</span></code></pre><p>Windows 中执行, 找到下面 WSL 对应的 IP 地址</p><pre class="language-shell"><code><span class="Token Program ID">ipconfig</span></code></pre><p><a data-lightbox="example-1" href="https://raw.githubusercontent.com/learner-lu/picbed/master/20230806120832.png"><img src="https://raw.githubusercontent.com/learner-lu/picbed/master/20230806120832.png" alt="20230806120832"></a></p><p>在 ~/.bashrc 中添加, 将 IP 地址替换为你的</p><pre class="language-shell"><code><span class="Token Keyword EXPORT">export</span><span class="Token SPACE"> </span><span class="Token Variant ID">DISPLAY</span><span class="Token ASSIGN">=</span><span class="Token NUMBER">172.19</span><span class="Token ID">.64.1:0</span></code></pre><p>下载 <a href="https://sourceforge.net/projects/vcxsrv/" target="_blank">sourceforge vcxsrv</a>, 完成后点击 <code>xlaunch.exe</code> 启动, 选择 one large window, 第二个不动, 最后参数添加 <code>-ac</code></p><p><a data-lightbox="example-1" href="https://raw.githubusercontent.com/learner-lu/picbed/master/20230806121155.png"><img src="https://raw.githubusercontent.com/learner-lu/picbed/master/20230806121155.png" alt="20230806121155"></a></p><p>启动图形化界面, 然后在 WSL2 中运行 xfce4</p><pre class="language-shell"><code><span class="Token Program ID">sudo</span><span class="Token SPACE"> </span><span class="Token ID">startxfce4</span></code></pre><p><a data-lightbox="example-1" href="https://raw.githubusercontent.com/learner-lu/picbed/master/20230806120957.png"><img src="https://raw.githubusercontent.com/learner-lu/picbed/master/20230806120957.png" alt="20230806120957"></a></p><p><a data-lightbox="example-1" href="https://raw.githubusercontent.com/learner-lu/picbed/master/20230806121624.png"><img src="https://raw.githubusercontent.com/learner-lu/picbed/master/20230806121624.png" alt="20230806121624"></a></p><ul><li><a href="https://www.cnblogs.com/blauendonau/p/14166062.html" target="_blank">通过 VcXsrv 在 WSL2 上使用图形化界面(xfce4)</a></li></ul><ul><li><a href="https://www.bilibili.com/video/BV1mX4y177dJ/" target="_blank">【WSL2】在你的win10/11电脑上安装Linux子系统+Ubuntu+图形化界面</a></li></ul><h2 id="h2-14">修改默认登录用户</h2><p><a href="https://blog.csdn.net/qq_37085158/article/details/131041223" target="_blank">WSL 修改默认用户</a></p><h2 id="h2-15">WSL2 切换根目录位置</h2><p>默认安装路径在 C 盘, 但是用久了会变大, 可以考虑移动目录到其他位置</p><p>查看虚拟机</p><pre class="language-shell"><code><span class="Token Program ID">wsl</span><span class="Token SPACE"> </span><span class="Token OPTION">-l</span><span class="Token SPACE"> </span><span class="Token OPTION">-v</span></code></pre><blockquote><p>假设名字为 Ubuntu</p></blockquote><pre class="language-shell"><code><span class="Token Program ID">wsl</span><span class="Token SPACE"> </span><span class="Token OPTION">--shutdown</span></code></pre><p>导出 Ubuntu 保存为一个镜像, 这一步会比较慢, 相当于打一个快照以便后期恢复</p><pre class="language-shell"><code><span class="Token Program ID">wsl</span><span class="Token SPACE"> </span><span class="Token OPTION">--export</span><span class="Token SPACE"> </span><span class="Token ID">Ubuntu</span><span class="Token SPACE"> </span><span class="Token ID">H:</span><span class="Token BACK_SLASH">\</span><span class="Token ID">wsl2-backup</span><span class="Token BACK_SLASH">\</span><span class="Token ID">WSL2Ubuntu.bak</span></code></pre><p>注销原先用户</p><pre class="language-shell"><code><span class="Token Program ID">wsl</span><span class="Token SPACE"> </span><span class="Token OPTION">--unregister</span><span class="Token SPACE"> </span><span class="Token ID">Ubuntu</span></code></pre><p>导入到一个新位置(F)</p><pre class="language-shell"><code><span class="Token Program ID">wsl</span><span class="Token SPACE"> </span><span class="Token OPTION">--import</span><span class="Token SPACE"> </span><span class="Token ID">Ubuntu</span><span class="Token SPACE"> </span><span class="Token ID">F:</span><span class="Token BACK_SLASH">\</span><span class="Token ID">wsl2</span><span class="Token BACK_SLASH">\</span><span class="Token SPACE"> </span><span class="Token ID">H:</span><span class="Token BACK_SLASH">\</span><span class="Token ID">wsl2-backup</span><span class="Token BACK_SLASH">\</span><span class="Token ID">WSL2Ubuntu.bak</span><span class="Token SPACE"> </span><span class="Token OPTION">--version</span><span class="Token SPACE"> </span><span class="Token NUMBER">2</span></code></pre><p>导入成功后可以再次查看一下</p><pre class="language-shell"><code><span class="Token Program ID">wsl</span><span class="Token SPACE"> </span><span class="Token OPTION">-l</span><span class="Token SPACE"> </span><span class="Token OPTION">-v</span></code></pre><p>如果不在第一个默认启动位置可以修改默认启动为 Ubuntu</p><pre class="language-shell"><code><span class="Token Program ID">wsl</span><span class="Token SPACE"> </span><span class="Token OPTION">--set-default</span><span class="Token SPACE"> </span><span class="Token ID">Ubuntu</span></code></pre><p>默认使用 <code>wsl</code> 登录会以 root 用户登录, 修改为之前的用户名</p><pre class="language-shell"><code><span class="Token Program ID">Ubuntu</span><span class="Token SPACE"> </span><span class="Token ID">config</span><span class="Token SPACE"> </span><span class="Token OPTION">--default-user</span><span class="Token SPACE"> </span><span class="Token ID">kamilu</span></code></pre><h2 id="h2-16">参考</h2><ul><li><a href="https://www.cnblogs.com/tl542475736/p/14855863.html" target="_blank">WSL修改默认安装目录到其他盘</a></li></ul><ul><li><a href="https://learn.microsoft.com/zh-cn/windows/wsl/basic-commands" target="_blank">microsoft learn</a></li></ul></div>
    <div class="dir-tree"><ul><li><a href="../../md-docs/README" >README</a></li></ul><ul><li><a href="../../环境配置/docker基本命令" >环境配置</a><ul><li><a href="../../环境配置/docker基本命令" >docker基本命令</a></li></ul><ul><li><a href="../../环境配置/gcc版本切换" >gcc版本切换</a></li></ul><ul><li><a href="../../环境配置/Linux代理配置" >Linux代理配置</a></li></ul><ul><li><a href="../../环境配置/mysql使用" >mysql使用</a></li></ul><ul><li><a href="../../环境配置/nodejs" >nodejs</a></li></ul><ul><li><a href="../../环境配置/pws" >pws</a></li></ul><ul><li><a href="../../环境配置/Ubuntu切换NVIDIA驱动" >Ubuntu切换NVIDIA驱动</a></li></ul><ul><li><a href="../../环境配置/Ubuntu工作环境配置" >Ubuntu工作环境配置</a></li></ul><ul><li><a href="../../环境配置/VMware虚拟机配置" >VMware虚拟机配置</a></li></ul><ul><li><a href="../../环境配置/WSL2配置" >WSL2配置</a></li></ul><ul><li><a href="../../环境配置/zsh配置" >zsh配置</a></li></ul><ul><li><a href="../../环境配置/双系统安装" >双系统安装</a></li></ul></li></ul><ul><li><a href="../../服务器/SSH" >服务器</a><ul><li><a href="../../服务器/SSH" >SSH</a></li></ul><ul><li><a href="../../服务器/服务器入门" >服务器入门</a></li></ul><ul><li><a href="../../服务器/服务器的各项配置" >服务器的各项配置</a></li></ul></li></ul><ul><li><a href="../../csapp/浮点数的表示" >csapp</a><ul><li><a href="../../csapp/浮点数的表示" >浮点数的表示</a></li></ul></li></ul><ul><li><a href="../../GAN/GAN网络详解(一)" >GAN</a><ul><li><a href="../../GAN/GAN网络详解(一)" >GAN网络详解(一)</a></li></ul><ul><li><a href="../../GAN/GAN网络详解(三)" >GAN网络详解(三)</a></li></ul><ul><li><a href="../../GAN/GAN网络详解(二)" >GAN网络详解(二)</a></li></ul><ul><li><a href="../../GAN/GAN网络详解(四)" >GAN网络详解(四)</a></li></ul></li></ul><ul><li><a href="../../git/gitignore使用" >git</a><ul><li><a href="../../git/gitignore使用" >gitignore使用</a></li></ul><ul><li><a href="../../git/git常用命令" >git常用命令</a></li></ul><ul><li><a href="../../git/git的branch和pull" >git的branch和pull</a></li></ul><ul><li><a href="../../git/git的commit用法" >git的commit用法</a></li></ul><ul><li><a href="../../git/git的SSH连接" >git的SSH连接</a></li></ul><ul><li><a href="../../git/git的使用" >git的使用</a></li></ul></li></ul><ul><li><a href="../../python/pytorch预训练模型下载地址" >python</a><ul><li><a href="../../python/pytorch预训练模型下载地址" >pytorch预训练模型下载地址</a></li></ul><ul><li><a href="../../python/优雅的日志记录-logging" >优雅的日志记录-logging</a></li></ul><ul><li><a href="../../python/使用PYPI发布python包" >使用PYPI发布python包</a></li></ul><ul><li><a href="../../python/测试覆盖率" >测试覆盖率</a></li></ul><ul><li><a href="../../python/深度学习模型部署-1" >深度学习模型部署-1</a></li></ul><ul><li><a href="../../python/深度学习模型部署-2" >深度学习模型部署-2</a></li></ul></li></ul><ul><li><a href="../../体系结构/cache" >体系结构</a><ul><li><a href="../../体系结构/cache" >cache</a></li></ul><ul><li><a href="../../体系结构/DRAM" >DRAM</a></li></ul><ul><li><a href="../../体系结构/NVM" >NVM</a></li></ul><ul><li><a href="../../体系结构/RDMA简介" >RDMA简介</a></li></ul><ul><li><a href="../../体系结构/动态内存分配" >动态内存分配</a></li></ul><ul><li><a href="../../体系结构/虚拟内存" >虚拟内存</a></li></ul></li></ul><ul><li><a href="../../杂/vscode基本配置" >杂</a><ul><li><a href="../../杂/vscode基本配置" >vscode基本配置</a></li></ul><ul><li><a href="../../杂/疑难杂症的报错" >疑难杂症的报错</a></li></ul></li></ul><ul><li><a href="../../网站/hexo部署网页" >网站</a><ul><li><a href="../../网站/hexo部署网页" >hexo部署网页</a></li></ul><ul><li><a href="../../网站/搭建个人博客" >搭建个人博客</a></li></ul><ul><li><a href="../../网站/注意事项" >注意事项</a></li></ul></li></ul></div>
    <div class="zood"><a class="" href="https://github.com/luzhixing12345/zood" target="_blank">zood</a></div>
    <script type="text/javascript" src="../../../js/next_front.js"></script><script>addLink("../../环境配置/VMware虚拟机配置","../../环境配置/zsh配置","ab");</script><script type="text/javascript" src="../../../js/change_mode.js"></script><script>addChangeModeButton("../../../img/sun.png","../../../img/moon.png");</script><script type="text/javascript" src="../../../js/copy_code.js"></script><script>addCodeCopy("../../../img/before_copy.png","../../../img/after_copy.png");</script><script type="text/javascript" src="../../../js/navigator.js"></script><script type="text/javascript" src="../../../js/picture_preview.js"></script><script type="text/javascript" src="../../../js/global_js_configuration.js"></script>
</body>

</html>