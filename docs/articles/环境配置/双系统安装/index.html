<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        Document
    </title>
    <link rel='stylesheet' href=../../../css/index.css />
    <link rel='stylesheet' href=../../../css/c.css /><link rel='stylesheet' href=../../../css/css.css /><link rel='stylesheet' href=../../../css/json.css /><link rel='stylesheet' href=../../../css/python.css /><link rel='stylesheet' href=../../../css/shell.css /><link rel='stylesheet' href=../../../css/toml.css /><link rel='stylesheet' href=../../../css/txt.css /><link rel='stylesheet' href=../../../css/yaml.css />
    <link rel="icon" href="https://raw.githubusercontent.com/learner-lu/picbed/master/logo.png">
</head>

<body class="light">
    <a href="https://github.com/luzhixing12345/luzhixing12345.github.io" target="_blank" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <div class="header-navigator"><ul><li><a href="#h2-0">前言</a></li></ul><ul><li><a href="#h2-1">配置双系统</a><ul><li><a href="#h3-2">开始之前</a></li></ul><ul><li><a href="#h3-3">1.下载Ubuntu镜像</a></li></ul><ul><li><a href="#h3-4">2.制作U盘启动盘</a></li></ul><ul><li><a href="#h3-5">3.为Ubuntu的安装腾出磁盘空间</a></li></ul><ul><li><a href="#h3-6">4.Ubuntu启动安装</a></li></ul><ul><li><a href="#h3-7">5.安装完成</a></li></ul><ul><li><a href="#h3-8">6.双系统收尾工作</a><ul><li><a href="#h4-9">开机引导</a></li></ul><ul><li><a href="#h4-10">卸载</a></li></ul></li></ul></li></ul><ul><li><a href="#h2-11">可能遇到的问题</a><ul><li><a href="#h3-12">Ubuntu efi删除失败</a></li></ul><ul><li><a href="#h3-13">Windows Boot Manager 丢失</a></li></ul></li></ul><ul><li><a href="#h2-14">参考</a></li></ul></div><div class='markdown-body'><hr><p>title: 双系统安装 date: 2022-11-15 16:24:28 tags: 环境配置</p><hr><h2 id="h2-0">前言</h2><p>笔者由于学习原因需要使用Ubuntu系统编译源码,但是服务器使用的系统是Debian,且使用docker编译内存不足.且考虑到后续修改和性能原因不希望使用虚拟机,于是决定安装双系统(Win11+Ubuntu22.04),本文记录一下安装过程</p><h2 id="h2-1">配置双系统</h2><blockquote><p><a href="https://blog.csdn.net/Flag_ing/article/details/121908340" target="_blank">Ubuntu 双系统安装流程</a></p><p><a href="https://www.cnblogs.com/masbay/p/11627727.html" target="_blank">Windows10安装ubuntu22.04双系统教程</a></p></blockquote><h3 id="h3-2"><ol start="0"><li>开始之前</li></ol></h3><p>由于开始安装双系统之后就离开了Windows,所以如果需要对照文档你还需要另一台设备. 由于本博客挂载在 Github 的域名之下,所以请考虑你的另一台设备能否打开这个网址</p><p>其次切换系统时 Windows 会进入一个蓝屏白字的状态并且要求进行 BitLocker 恢复密钥以确保系统运行正常</p><p>你可以打开如下<a href="https://account.microsoft.com/devices/recoverykey" target="_blank">Microsoft 帐户恢复密钥网址</a>,登录之后就可以查看到你的恢复密钥ID及其对应的恢复密钥了. 建议截图保存,以便后续输入使用</p><blockquote><p>恢复密钥输入时使用的是F1-F10进行输入</p></blockquote><p>以下内容为笔者经验之谈,记录分享. 不过毕竟是涉及到操作系统的切换以及安装,很难保证万无一失,所以如果您的windows系统中真的有及其重要的文件资源请提前备份</p><h3 id="h3-3">1.下载Ubuntu镜像</h3><p>Ubuntu版本存在多个版本,部分用户偏爱更稳定的老版本,部分用户偏向使用新版本,笔者使用的是当前(2022/11/15)最新的版本Ubuntu22.04,不同版本的安装过程是完全相同的,如果读者更偏好其他版本可以自行选择下载</p><ul><li><a href="https://releases.ubuntu.com/22.04/" target="_blank">Ubuntu22.04</a></li></ul><ul><li><a href="https://releases.ubuntu.com/20.04/" target="_blank">Ubuntu20.04</a></li></ul><ul><li><a href="https://releases.ubuntu.com/18.04/" target="_blank">Ubuntu18.04</a></li></ul><ul><li><a href="https://releases.ubuntu.com/16.04/" target="_blank">Ubuntu16.04</a></li></ul><h3 id="h3-4">2.制作U盘启动盘</h3><p>首先找到一块U盘,制作启动盘会导致U盘内部数据全部清除,<b>如果内部有重要数据请做好备份</b>.</p><p>U盘启动盘制作之后可以在还原回到U盘,这一点不必担心</p><p>Ubuntu系统大小大约在2-4G,正常市面的U盘容量应该都足够</p><p>下载启动盘制作软件 <a href="https://rufus.en.softonic.com/download" target="_blank">rufus</a>, 软件很小且无需安装,打开之后可以看到如下界面</p><p><a data-lightbox="example-1" href="https://raw.githubusercontent.com/learner-lu/picbed/master/20221115140746.png"><img src="https://raw.githubusercontent.com/learner-lu/picbed/master/20221115140746.png" alt="20221115140746"></a></p><p>其中设备选择你的U盘,引导类型选择打开下载的Ubuntu镜像,其他不需要更改,点击开始,确认推荐即可</p><p>绿色进度条满之后U盘启动盘就制作好了</p><h3 id="h3-5">3.为Ubuntu的安装腾出磁盘空间</h3><p>右键我的电脑,选择 <code>管理</code>,找到磁盘管理,可以看到你的磁盘状况</p><p>如图为笔者的磁盘状态,其中红色框中的区域为已经安装好的Ubuntu系统的磁盘区域</p><p><a data-lightbox="example-1" href="https://raw.githubusercontent.com/learner-lu/picbed/master/20221115141134.png"><img src="https://raw.githubusercontent.com/learner-lu/picbed/master/20221115141134.png" alt="20221115141134"></a></p><p>双系统需要占据一定大小的磁盘空间,你的电脑可能是一整块C盘也可能是已经分区好了,这个没有影响.选择一块较为空闲的磁盘(比如D盘),划分一块空间</p><p>这个空间的大小不宜过小,至少也要在40GB以上吧,因为后续的软件安装以及其他库下载都需要占据这一块磁盘.</p><p>右键磁盘,压缩卷,根据1GB = 1024MB换算计算应该划分的大小,笔者这里分配了80GB的空间.划分之后的空间变为黑色(未分配)</p><h3 id="h3-6">4.Ubuntu启动安装</h3><p>插入U盘,重启. 在启动界面 <b>连续多次</b> 按F2或者F12可以进入Bios设置界面</p><p>笔者电脑是DELL,使用F2进入的是bios的设置,<b>F12进入的是boot menu</b>,<b>后者才是我们选择U盘启动盘的正确地方</b>,读者可以根据电脑型号自行查找,不外乎这两个</p><p>进入界面之后可以看到一个Windows的启动选项,一个U盘型号的启动选项,选择U盘的选项进入</p><p>然后就会进入系统选择界面,选择 Install Ubuntu 安装系统</p><p><b>语言环境一定要选择英文</b> <b>语言环境一定要选择英文</b> <b>语言环境一定要选择英文</b>,重要的话说三遍. 我们可以后续安装中文拼音输入法,也可以使用各种翻译软件工具辅助,但是一定要选择英文环境安装,不然后续出现一些字符编码问题,路径问题都是极其头痛的,<b>切记!!!</b></p><p>可以先不联网,后续联网配置VPN代理一并搞定.</p><p>安装方式选择 Normal Installation 即可. Other option 什么也不勾选</p><p>安装类型(Installation type)选择 <b>Something else</b>,因为需要自定义划分磁盘空间</p><p>接下来进入一个磁盘空间的页面,找到之前划分的那一块未分配的空间(free space),我们将会对这一块空间进行再划分</p><p>选中区域,点击左下角加号</p><p><b>以下所有的都是空间起始位置(Beginning of this space),不需要修改</b></p><ul><li>200MB Logical EFI,用于启动引导<p>这里的选择EFI是指切换下面的<code>Ext4 journaling file system</code>,找到EFI</p></li></ul><ul><li>8GB(8096MB) Logical swap area(用于交换区)<p>这里我建议有条件的把内存划分的大一些,16GB,32GB.linux内核编译就很占内存,分大一些对于软件和编译来说都比较友好</p></li></ul><p>除此之外你可以利用剩余的空间划分 <code>/</code> 和 <code>/home</code>,其中 <code>/</code> 根目录,用于安装系统和软件相当于C盘,可以适当划分大一些</p><ul><li>30GB(30720MB) Primary <code>/</code></li></ul><ul><li>剩下的 Primary <code>/home</code></li></ul><p><b>下面的这一步非常重要</b> : 在分区界面的下方,选择安装启动项的位置, <b>这里要选择你刚刚划分的efi分区的编号</b></p><p>efi分区的大小是200MB,有一个是Windows的efi那个不要动! 找到你划分的那个分区的EFI. 目前划分的四个分区是连在一起的,你可以很容易的找到它(200MB),例如下图中的 <code>/dev/nvmeOn1p9</code></p><p><a data-lightbox="example-1" href="https://raw.githubusercontent.com/learner-lu/picbed/master/asdq1342.jpg"><img src="https://raw.githubusercontent.com/learner-lu/picbed/master/asdq1342.jpg" alt="asdq1342"></a></p><p>然后选择安装启动引导器的设备,选择这个引导器,现在安装</p><p><b>注意不要用中文环境,使用英文环境!</b></p><h3 id="h3-7">5.安装完成</h3><p>接下来就是选地区,用户名密码这都没什么好说的. 等待安装全部完成之后,会提醒你重启,把U盘拔了,点&quot;restart now&quot;,如果卡死就强制关机再重启就好,不要慌没有问题的</p><h3 id="h3-8">6.双系统收尾工作</h3><p>注意,刚刚安装好的双系统不要马上有特别大的动作, 稍微等电脑凉一凉, 风扇不转了再配环境等等, 不然容易死机...</p><h4 id="h4-9">开机引导</h4><p>双系统的引导菜单是Ubuntu的引导其grub的菜单,所以重启之后排在第一位的是ubuntu系统的启动,第二位通常是ubuntu的高级选项,第三是windows,我们可以根据情况选择.</p><p>你可以在开机的时候使用F2进入boot configuration调整windows boot manager的优先级到ubuntu的上面,这样开机默认进入windows了</p><p>第一次由Ubuntu安装完毕再进入windows可能会需要输入Bitlock解锁,你可以在如下网址找到你的恢复密钥,不过这是笔者一开始0节处就提到过的内容</p><p>如果你不想被反复的bitlock困扰, 可以使用 F2 进入 boot configuration 取消勾选 security</p><blockquote><p><a href="https://account.microsoft.com/devices/recoverykey" target="_blank">https://account.microsoft.com/devices/recoverykey</a></p></blockquote><p>如果想要切换默认进入windows,可以修改开机引导grub,但笔者习惯直接进入F2将windows的启动项移到ubuntu前面,这样默认进入的是windows的启动盘</p><p>如果需要进入ubuntu就F12然后选择ubuntu启动即可</p><h4 id="h4-10">卸载</h4><p>如果不想使用ubuntu系统了就删除磁盘空间即可,右键删除卷</p><p><a data-lightbox="example-1" href="https://raw.githubusercontent.com/learner-lu/picbed/master/20221115141134.png"><img src="https://raw.githubusercontent.com/learner-lu/picbed/master/20221115141134.png" alt="20221115141134"></a></p><p>不过最开始的efi分区无法被直接删除,需要手动删除一下</p><p>进入windows, 使用 <kbd>win</kbd> + <kbd>r</kbd> 打开运行, 输入 diskpart 进入磁盘管理</p><ul><li>输入 <code>list disk</code> 查看磁盘状态<pre class="language-shell"><code><span class="Token Program ID">DISKPART</span><span class="Token REDIRECT_TO">&gt;</span><span class="Token SPACE"> </span><span class="Token ID">list</span><span class="Token SPACE"> </span><span class="Token ID">disk</span><span class="Token LF">
</span><span class="Token LF">
</span><span class="Token SPACE">  </span><span class="Token ID">磁盘</span><span class="Token SPACE"> </span><span class="Token COMMENT">###  状态           大小     可用     Dyn  Gpt</span><span class="Token LF">
</span><span class="Token SPACE">  </span><span class="Token OPTION">--------</span><span class="Token SPACE">  </span><span class="Token OPTION">-------------</span><span class="Token SPACE">  </span><span class="Token OPTION">-------</span><span class="Token SPACE">  </span><span class="Token OPTION">-------</span><span class="Token SPACE">  </span><span class="Token OPTION">---</span><span class="Token SPACE">  </span><span class="Token OPTION">---</span><span class="Token LF">
</span><span class="Token SPACE">  </span><span class="Token ID">磁盘</span><span class="Token SPACE"> </span><span class="Token NUMBER">0</span><span class="Token SPACE">    </span><span class="Token ID">联机</span><span class="Token SPACE">              </span><span class="Token NUMBER">476</span><span class="Token SPACE"> </span><span class="Token Program ID">GB</span><span class="Token SPACE">    </span><span class="Token NUMBER">16</span><span class="Token SPACE"> </span><span class="Token ID">MB</span><span class="Token SPACE">        </span><span class="Token MUL">*</span><span class="Token LF">
</span><span class="Token SPACE">  </span><span class="Token ID">磁盘</span><span class="Token SPACE"> </span><span class="Token NUMBER">1</span><span class="Token SPACE">    </span><span class="Token ID">联机</span><span class="Token SPACE">              </span><span class="Token NUMBER">931</span><span class="Token SPACE"> </span><span class="Token Program ID">GB</span><span class="Token SPACE">      </span><span class="Token NUMBER">0</span><span class="Token SPACE"> </span><span class="Token ID">B</span></code></pre><p>当然你也有可能不是这样的,笔者的磁盘1是一块移动硬盘</p><p>如果你手动增加了一块硬盘的话也可能是如下的情况,这里我新增了一块1TB的NVM SSD硬盘,并且分配了500GB,剩下453GB没有分配</p><pre class="language-txt"><code><span class="Token ID">DISKPART</span><span class="Token BraceDepth-0 RANGLE_BRACE">&gt;</span><span class="Token SPACE"> </span><span class="Token ID">list</span><span class="Token SPACE"> </span><span class="Token ID">disk</span><span class="Token LF">
</span><span class="Token LF">
</span><span class="Token ID">磁盘</span><span class="Token SPACE"> </span><span class="Token HASH">#</span><span class="Token HASH">#</span><span class="Token HASH">#</span><span class="Token SPACE">  </span><span class="Token ID">状态</span><span class="Token SPACE">           </span><span class="Token ID">大小</span><span class="Token SPACE">     </span><span class="Token ID">可用</span><span class="Token SPACE">     </span><span class="Token ID">Dyn</span><span class="Token SPACE">  </span><span class="Token ID">Gpt</span><span class="Token LF">
</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token SPACE">  </span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token SPACE">  </span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token SPACE">  </span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token SPACE">  </span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token SPACE">  </span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token MINUS">-</span><span class="Token LF">
</span><span class="Token ID">磁盘</span><span class="Token SPACE"> </span><span class="Token NUMBER">0</span><span class="Token SPACE">    </span><span class="Token ID">联机</span><span class="Token SPACE">              </span><span class="Token NUMBER">476</span><span class="Token SPACE"> </span><span class="Token ID">GB</span><span class="Token SPACE">    </span><span class="Token NUMBER">79</span><span class="Token SPACE"> </span><span class="Token ID">GB</span><span class="Token SPACE">        </span><span class="Token MUL">*</span><span class="Token LF">
</span><span class="Token ID">磁盘</span><span class="Token SPACE"> </span><span class="Token NUMBER">1</span><span class="Token SPACE">    </span><span class="Token ID">联机</span><span class="Token SPACE">              </span><span class="Token NUMBER">953</span><span class="Token SPACE"> </span><span class="Token ID">GB</span><span class="Token SPACE">   </span><span class="Token NUMBER">453</span><span class="Token SPACE"> </span><span class="Token ID">GB</span><span class="Token SPACE">        </span><span class="Token MUL">*</span><span class="Token LF">
</span><span class="Token ID">磁盘</span><span class="Token SPACE"> </span><span class="Token NUMBER">2</span><span class="Token SPACE">    </span><span class="Token ID">联机</span><span class="Token SPACE">              </span><span class="Token NUMBER">931</span><span class="Token SPACE"> </span><span class="Token ID">GB</span><span class="Token SPACE">      </span><span class="Token NUMBER">0</span><span class="Token SPACE"> </span><span class="Token ID">B</span></code></pre><p>现在的状态是我已经之前分配的80GB空间删除卷,所以磁盘0剩余空间79GB,efi分区暂时没有删除,我想将双系统转移到磁盘1中的未分配的453GB中</p></li></ul><ul><li>输入 <code>select disk 0</code> 选择磁盘0(即主磁盘), 输入 <code>list partition</code> 查看所有分区<pre class="language-shell"><code><span class="Token Program ID">DISKPART</span><span class="Token REDIRECT_TO">&gt;</span><span class="Token SPACE"> </span><span class="Token ID">select</span><span class="Token SPACE"> </span><span class="Token ID">disk</span><span class="Token SPACE"> </span><span class="Token NUMBER">0</span><span class="Token LF">
</span><span class="Token LF">
</span><span class="Token ID">磁盘</span><span class="Token SPACE"> </span><span class="Token NUMBER">0</span><span class="Token SPACE"> </span><span class="Token ID">现在是所选磁盘.</span><span class="Token LF">
</span><span class="Token LF">
</span><span class="Token Program ID">DISKPART</span><span class="Token REDIRECT_TO">&gt;</span><span class="Token SPACE"> </span><span class="Token ID">list</span><span class="Token SPACE"> </span><span class="Token ID">partition</span><span class="Token LF">
</span><span class="Token LF">
</span><span class="Token SPACE">  </span><span class="Token ID">分区</span><span class="Token SPACE"> </span><span class="Token COMMENT">###       类型              大小     偏移量</span><span class="Token LF">
</span><span class="Token SPACE">  </span><span class="Token OPTION">-------------</span><span class="Token SPACE">  </span><span class="Token OPTION">----------------</span><span class="Token SPACE">  </span><span class="Token OPTION">-------</span><span class="Token SPACE">  </span><span class="Token OPTION">-------</span><span class="Token LF">
</span><span class="Token SPACE">  </span><span class="Token ID">分区</span><span class="Token SPACE">      </span><span class="Token NUMBER">1</span><span class="Token SPACE">    </span><span class="Token ID">系统</span><span class="Token SPACE">                 </span><span class="Token NUMBER">200</span><span class="Token SPACE"> </span><span class="Token Program ID">MB</span><span class="Token SPACE">  </span><span class="Token NUMBER">1024</span><span class="Token SPACE"> </span><span class="Token ID">KB</span><span class="Token LF">
</span><span class="Token SPACE">  </span><span class="Token ID">分区</span><span class="Token SPACE">      </span><span class="Token NUMBER">2</span><span class="Token SPACE">    </span><span class="Token ID">已保留</span><span class="Token SPACE">                </span><span class="Token NUMBER">128</span><span class="Token SPACE"> </span><span class="Token Program ID">MB</span><span class="Token SPACE">   </span><span class="Token NUMBER">201</span><span class="Token SPACE"> </span><span class="Token ID">MB</span><span class="Token LF">
</span><span class="Token SPACE">  </span><span class="Token ID">分区</span><span class="Token SPACE">      </span><span class="Token NUMBER">3</span><span class="Token SPACE">    </span><span class="Token ID">主要</span><span class="Token SPACE">                 </span><span class="Token NUMBER">257</span><span class="Token SPACE"> </span><span class="Token Program ID">GB</span><span class="Token SPACE">   </span><span class="Token NUMBER">329</span><span class="Token SPACE"> </span><span class="Token ID">MB</span><span class="Token LF">
</span><span class="Token SPACE">  </span><span class="Token ID">分区</span><span class="Token SPACE">      </span><span class="Token NUMBER">4</span><span class="Token SPACE">    </span><span class="Token ID">主要</span><span class="Token SPACE">                  </span><span class="Token NUMBER">99</span><span class="Token SPACE"> </span><span class="Token Program ID">GB</span><span class="Token SPACE">   </span><span class="Token NUMBER">257</span><span class="Token SPACE"> </span><span class="Token ID">GB</span><span class="Token LF">
</span><span class="Token SPACE">  </span><span class="Token ID">分区</span><span class="Token SPACE">      </span><span class="Token NUMBER">5</span><span class="Token SPACE">    </span><span class="Token ID">主要</span><span class="Token SPACE">                  </span><span class="Token NUMBER">19</span><span class="Token SPACE"> </span><span class="Token Program ID">GB</span><span class="Token SPACE">   </span><span class="Token NUMBER">357</span><span class="Token SPACE"> </span><span class="Token ID">GB</span><span class="Token LF">
</span><span class="Token SPACE">  </span><span class="Token ID">分区</span><span class="Token SPACE">      </span><span class="Token NUMBER">6</span><span class="Token SPACE">    </span><span class="Token ID">系统</span><span class="Token SPACE">                 </span><span class="Token NUMBER">191</span><span class="Token SPACE"> </span><span class="Token Program ID">MB</span><span class="Token SPACE">   </span><span class="Token NUMBER">377</span><span class="Token SPACE"> </span><span class="Token ID">GB</span><span class="Token LF">
</span><span class="Token SPACE">  </span><span class="Token ID">分区</span><span class="Token SPACE">      </span><span class="Token NUMBER">10</span><span class="Token SPACE">   </span><span class="Token ID">未知</span><span class="Token SPACE">                </span><span class="Token NUMBER">7721</span><span class="Token SPACE"> </span><span class="Token Program ID">MB</span><span class="Token SPACE">   </span><span class="Token NUMBER">377</span><span class="Token SPACE"> </span><span class="Token ID">GB</span><span class="Token LF">
</span><span class="Token SPACE">  </span><span class="Token ID">分区</span><span class="Token SPACE">      </span><span class="Token NUMBER">11</span><span class="Token SPACE">   </span><span class="Token ID">未知</span><span class="Token SPACE">                  </span><span class="Token NUMBER">28</span><span class="Token SPACE"> </span><span class="Token Program ID">GB</span><span class="Token SPACE">   </span><span class="Token NUMBER">385</span><span class="Token SPACE"> </span><span class="Token ID">GB</span><span class="Token LF">
</span><span class="Token SPACE">  </span><span class="Token ID">分区</span><span class="Token SPACE">      </span><span class="Token NUMBER">12</span><span class="Token SPACE">   </span><span class="Token ID">未知</span><span class="Token SPACE">                  </span><span class="Token NUMBER">43</span><span class="Token SPACE"> </span><span class="Token Program ID">GB</span><span class="Token SPACE">   </span><span class="Token NUMBER">414</span><span class="Token SPACE"> </span><span class="Token ID">GB</span><span class="Token LF">
</span><span class="Token SPACE">  </span><span class="Token ID">分区</span><span class="Token SPACE">      </span><span class="Token NUMBER">7</span><span class="Token SPACE">    </span><span class="Token ID">恢复</span><span class="Token SPACE">                 </span><span class="Token NUMBER">990</span><span class="Token SPACE"> </span><span class="Token Program ID">MB</span><span class="Token SPACE">   </span><span class="Token NUMBER">457</span><span class="Token SPACE"> </span><span class="Token ID">GB</span><span class="Token LF">
</span><span class="Token SPACE">  </span><span class="Token ID">分区</span><span class="Token SPACE">      </span><span class="Token NUMBER">8</span><span class="Token SPACE">    </span><span class="Token ID">恢复</span><span class="Token SPACE">                  </span><span class="Token NUMBER">16</span><span class="Token SPACE"> </span><span class="Token Program ID">GB</span><span class="Token SPACE">   </span><span class="Token NUMBER">458</span><span class="Token SPACE"> </span><span class="Token ID">GB</span><span class="Token LF">
</span><span class="Token SPACE">  </span><span class="Token ID">分区</span><span class="Token SPACE">      </span><span class="Token NUMBER">9</span><span class="Token SPACE">    </span><span class="Token ID">恢复</span><span class="Token SPACE">                </span><span class="Token NUMBER">1501</span><span class="Token SPACE"> </span><span class="Token Program ID">MB</span><span class="Token SPACE">   </span><span class="Token NUMBER">475</span><span class="Token SPACE"> </span><span class="Token ID">GB</span></code></pre><p>这里可以看到类型中有两个是 <code>系统</code> 类型,其中200MB并且较小偏移量的是windows的引导,不要动! 选择剩下的那个 191MB 的系统分区,这个是我们ubuntu的引导区, 这个分区的编号与上文 <code>4.Ubuntu启动安装</code> 的efi分区是相同的编号,注意不要选错了</p><p>以下情况根据笔者自身情况分析,<b>请读者自行调整为你的分区编号</b></p></li></ul><ul><li>选择分区6 ,完成删除<pre class="language-shell"><code><span class="Token Program ID">select</span><span class="Token SPACE"> </span><span class="Token ID">partition</span><span class="Token SPACE"> </span><span class="Token NUMBER">6</span><span class="Token LF">
</span><span class="Token Program ID">delete</span><span class="Token SPACE"> </span><span class="Token ID">partition</span><span class="Token SPACE"> </span><span class="Token ID">override</span></code></pre></li></ul><p>下面看一下删除之后的效果,可以看到将EFI分区删除之后,未分配的80GB正是之前用来安装Ubuntu设置的空间大小</p><p><a data-lightbox="example-1" href="https://raw.githubusercontent.com/learner-lu/picbed/master/20230101203444.png"><img src="https://raw.githubusercontent.com/learner-lu/picbed/master/20230101203444.png" alt="20230101203444"></a></p><p><b>最后F2进BIOS把ubuntu的引导删掉即可</b>,这样就彻底删除了~</p><h2 id="h2-11">可能遇到的问题</h2><h3 id="h3-12">Ubuntu efi删除失败</h3><p>如果使用 <code>delete partition override</code> 失败,则可使用下面的方式</p><p>选择分区6 <code>select partition 6</code></p><p>创建一个新的挂载盘 <code>assign letter=K</code>, 这时候可以看到计算机多出来了一个盘,但是这个盘无法进入</p><p>在开始菜单找到记事本,右键【记事本】,选择【<b>以管理员身份运行</b>】,点击【文件】,点击【打开】.在文件浏览器里面可以进入刚刚挂载的K盘,找到名为Ubuntu的文件夹删除即可</p><p>删除之后再把刚刚挂载的K盘卸载就行.输入</p><pre class="language-shell"><code><span class="Token Program ID">remove</span><span class="Token SPACE"> </span><span class="Token Variant ID">letter</span><span class="Token ASSIGN">=</span><span class="Token ID">K</span></code></pre><h3 id="h3-13">Windows Boot Manager 丢失</h3><p>误删除Windows Boot Manager电脑会进入grub终端</p><ol start="1"><li>导入模块<pre class="language-shell"><code><span class="Token Program ID">insmod</span><span class="Token SPACE"> </span><span class="Token ID">part_gpt</span></code></pre></li></ol><ol start="2"><li>查看子目录<pre class="language-shell"><code><span class="Token Program ID">ls</span></code></pre><p>此时应该会列出一些 hd, gpt, (hd,gpt)的文件</p></li></ol><ol start="3"><li>找到windows的所在目录<p>通常来说是(hd0, gpt1), 如果不是的话你可以一个一个试</p><pre class="language-shell"><code><span class="Token Program ID">set</span><span class="Token SPACE"> </span><span class="Token Variant ID">root</span><span class="Token ASSIGN">=</span><span class="Token BraceDepth-0 LPAREN">(</span><span class="Token ID">hd0</span><span class="Token COMMA">,</span><span class="Token ID">gpt1</span><span class="Token BraceDepth-0 RPAREN">)</span><span class="Token LF">
</span><span class="Token Program ID">chainloader</span><span class="Token SPACE"> </span><span class="Token PATH">/efi/Microsoft/Boot/bootmgfw.efi</span></code></pre><p>如果chainloader这一步没有报错,则说明成功. 如果报错了那就换一个</p></li></ol><ol start="4"><li>chainloader成功后重启<pre class="language-shell"><code><span class="Token Program ID">boot</span></code></pre><blockquote><p>如果一次chainloader就成功了那么没有问题了,如果chainloader失败过几次那么你的引导项会出现好几个Windows,删掉前面的保留最后一个就行, 最后一个是成功的</p></blockquote></li></ol><h2 id="h2-14">参考</h2><ul><li><a href="https://zhuanlan.zhihu.com/p/392633489" target="_blank">https://zhuanlan.zhihu.com/p/392633489</a></li></ul><ul><li><a href="https://bbs.huaweicloud.com/blogs/303695" target="_blank">https://bbs.huaweicloud.com/blogs/303695</a></li></ul></div>
    <div class="dir-tree"><ul><li><a href="../../md-docs/README" >README</a></li></ul><ul><li><a href="../../环境配置/docker基本命令" >环境配置</a><ul><li><a href="../../环境配置/docker基本命令" >docker基本命令</a></li></ul><ul><li><a href="../../环境配置/gcc版本切换" >gcc版本切换</a></li></ul><ul><li><a href="../../环境配置/Linux代理配置" >Linux代理配置</a></li></ul><ul><li><a href="../../环境配置/mysql使用" >mysql使用</a></li></ul><ul><li><a href="../../环境配置/nodejs" >nodejs</a></li></ul><ul><li><a href="../../环境配置/pws" >pws</a></li></ul><ul><li><a href="../../环境配置/Ubuntu切换NVIDIA驱动" >Ubuntu切换NVIDIA驱动</a></li></ul><ul><li><a href="../../环境配置/Ubuntu工作环境配置" >Ubuntu工作环境配置</a></li></ul><ul><li><a href="../../环境配置/VMware虚拟机配置" >VMware虚拟机配置</a></li></ul><ul><li><a href="../../环境配置/WSL2配置" >WSL2配置</a></li></ul><ul><li><a href="../../环境配置/zsh配置" >zsh配置</a></li></ul><ul><li><a href="../../环境配置/双系统安装" >双系统安装</a></li></ul></li></ul><ul><li><a href="../../服务器/SSH" >服务器</a><ul><li><a href="../../服务器/SSH" >SSH</a></li></ul><ul><li><a href="../../服务器/服务器入门" >服务器入门</a></li></ul><ul><li><a href="../../服务器/服务器的各项配置" >服务器的各项配置</a></li></ul><ul><li><a href="../../服务器/网络通信" >网络通信</a></li></ul><ul><li><a href="../../服务器/内存占用高排查" >内存占用高排查</a></li></ul></li></ul><ul><li><a href="../../csapp/浮点数的表示" >csapp</a><ul><li><a href="../../csapp/浮点数的表示" >浮点数的表示</a></li></ul></li></ul><ul><li><a href="../../GAN/GAN网络详解(一)" >GAN</a><ul><li><a href="../../GAN/GAN网络详解(一)" >GAN网络详解(一)</a></li></ul><ul><li><a href="../../GAN/GAN网络详解(三)" >GAN网络详解(三)</a></li></ul><ul><li><a href="../../GAN/GAN网络详解(二)" >GAN网络详解(二)</a></li></ul><ul><li><a href="../../GAN/GAN网络详解(四)" >GAN网络详解(四)</a></li></ul></li></ul><ul><li><a href="../../git/gitignore使用" >git</a><ul><li><a href="../../git/gitignore使用" >gitignore使用</a></li></ul><ul><li><a href="../../git/git常用命令" >git常用命令</a></li></ul><ul><li><a href="../../git/git的branch和pull" >git的branch和pull</a></li></ul><ul><li><a href="../../git/git的commit用法" >git的commit用法</a></li></ul><ul><li><a href="../../git/git的SSH连接" >git的SSH连接</a></li></ul><ul><li><a href="../../git/git的使用" >git的使用</a></li></ul></li></ul><ul><li><a href="../../python/pytorch预训练模型下载地址" >python</a><ul><li><a href="../../python/pytorch预训练模型下载地址" >pytorch预训练模型下载地址</a></li></ul><ul><li><a href="../../python/优雅的日志记录-logging" >优雅的日志记录-logging</a></li></ul><ul><li><a href="../../python/使用PYPI发布python包" >使用PYPI发布python包</a></li></ul><ul><li><a href="../../python/测试覆盖率" >测试覆盖率</a></li></ul><ul><li><a href="../../python/深度学习模型部署-1" >深度学习模型部署-1</a></li></ul><ul><li><a href="../../python/深度学习模型部署-2" >深度学习模型部署-2</a></li></ul></li></ul><ul><li><a href="../../体系结构/cache" >体系结构</a><ul><li><a href="../../体系结构/cache" >cache</a></li></ul><ul><li><a href="../../体系结构/DRAM" >DRAM</a></li></ul><ul><li><a href="../../体系结构/NVM" >NVM</a></li></ul><ul><li><a href="../../体系结构/RDMA简介" >RDMA简介</a></li></ul><ul><li><a href="../../体系结构/动态内存分配" >动态内存分配</a></li></ul><ul><li><a href="../../体系结构/虚拟内存" >虚拟内存</a></li></ul></li></ul><ul><li><a href="../../杂/vscode基本配置" >杂</a><ul><li><a href="../../杂/vscode基本配置" >vscode基本配置</a></li></ul><ul><li><a href="../../杂/疑难杂症的报错" >疑难杂症的报错</a></li></ul></li></ul><ul><li><a href="../../网站/hexo部署网页" >网站</a><ul><li><a href="../../网站/hexo部署网页" >hexo部署网页</a></li></ul><ul><li><a href="../../网站/搭建个人博客" >搭建个人博客</a></li></ul><ul><li><a href="../../网站/注意事项" >注意事项</a></li></ul></li></ul><ul><li><a href="../../linux/cli" >linux</a><ul><li><a href="../../linux/cli" >cli</a></li></ul></li></ul></div>
    <div class="zood"><a class="" href="https://github.com/luzhixing12345/zood" target="_blank">zood</a></div>
    <script type="text/javascript" src="../../../js/next_front.js"></script><script>addLink("../../环境配置/zsh配置","../../服务器/SSH","ab");</script><script type="text/javascript" src="../../../js/change_mode.js"></script><script>addChangeModeButton("../../../img/sun.png","../../../img/moon.png");</script><script type="text/javascript" src="../../../js/copy_code.js"></script><script>addCodeCopy("../../../img/before_copy.png","../../../img/after_copy.png");</script><script type="text/javascript" src="../../../js/navigator.js"></script><script type="text/javascript" src="../../../js/picture_preview.js"></script><script type="text/javascript" src="../../../js/global_js_configuration.js"></script>
</body>

</html>